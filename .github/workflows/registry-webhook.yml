name: Trigger rebuild on registry update

# This workflow lives in the REGISTRY repo (llm-grimoire/registry),
# not in the web app repo. Copy it to the registry repo's .github/workflows/.

on:
  push:
    branches: [main]

jobs:
  trigger-rebuild:
    runs-on: ubuntu-latest
    steps:
      - run: |
          curl -X POST \
            -H "Accept: application/vnd.github+json" \
            -H "Authorization: Bearer ${{ secrets.WEB_REPO_TOKEN }}" \
            https://api.github.com/repos/llm-grimoire/web/dispatches \
            -d '{"event_type":"registry-updated"}'
